[part="wrapper"] {
	display: grid;
	gap: .3em;
	grid-auto-flow: row;
	grid-template-rows: auto auto;
	grid-template-columns: repeat(auto-fit, minmax(0, 1fr));
}

#swatches {
	display: contents;
}

[part="add-button"],
[part="delete-button"] {
	/* Common styles */
	all: unset;

	display: grid;
	place-items: center;

	color: var(--_foreground-color, canvastext);
	background-color: var(--_background-color, canvas);

	border: 3px solid color-mix(in oklab, buttonborder 20%,oklab(none none none / 0%));
	border-radius: 50%;

	cursor: pointer;

	&:is(:hover, :focus) {
		color: var(--_background-color, canvas);
		background-color: var(--_foreground-color, canvastext);
	}
}

color-swatch {
	position: relative;
	margin: 0;
	flex: 1;

	&:not(:hover, :focus-within) {
		[part="delete-button"] {
			opacity: 0;
			transition-duration: 0ms;
		}
	}

	&::part(color) {
		flex-direction: column;
	}

	[part="delete-button"] {
		--_foreground-color: red;

		position: absolute;
		inset-block-start: .3em;
		inset-inline-end: .3em;

		inline-size: 1.2em;
		aspect-ratio: 1;
		padding: .2em;

		box-shadow: 0 .05em 1em -.7em black;

		transition: opacity .2s;
	}
}

[part="add-button"] {
	--_foreground-color: deeppink;

	padding: .18em;

	border-style: dashed;
	border-radius: .2rem;

	font: inherit;
	font-size: 200%;
	font-weight: bold;
}

@supports (grid-template-columns: subgrid) {
	/* Avoid uneven swatch heights */
	color-swatch {
		width: 100%;
		grid-row: 1 / span 2;
		display: grid;
		grid-template-rows: subgrid;
		/*
		  Container queries don't play well together with subgrid in Chrome 129.
		  See https://issues.chromium.org/issues/369331413
		  This is a workaround to avoid the issue until the new Chrome version is released.
		*/
		contain: inline-size layout;

		&::part(swatch) {
			grid-row: 1;
		}
	}
}
